# è´å¶æ–¯ç½‘ç»œå‚æ•°ä¼˜åŒ–ç³»ç»Ÿä½¿ç”¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬ç³»ç»Ÿä¸ºè´å¶æ–¯ç½‘ç»œæ´ªæ°´é¢„æµ‹æ¨¡å‹æä¾›å…¨é¢çš„å‚æ•°ä¼˜åŒ–å’Œå¯è§†åŒ–åˆ†æåŠŸèƒ½ã€‚é€šè¿‡ç½‘æ ¼æœç´¢å’Œçº¦æŸæ¡ä»¶ç­›é€‰ï¼Œå¸®åŠ©ä½ æ‰¾åˆ°æœ€é€‚åˆä½ éœ€æ±‚çš„å‚æ•°é…ç½®ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®Œæ•´å‚æ•°ä¼˜åŒ–

è¿è¡Œå®Œæ•´çš„å‚æ•°ç½‘æ ¼æœç´¢ï¼ˆ4,320ä¸ªå‚æ•°ç»„åˆï¼‰ï¼š

```bash
python run_parameter_optimization.py
```

**é¢„è®¡è€—æ—¶**: 2-4å°æ—¶  
**å†…å­˜éœ€æ±‚**: å»ºè®® 8GB+

### 2. å¿«é€Ÿæµ‹è¯•éªŒè¯

è¿è¡Œå°è§„æ¨¡æµ‹è¯•ï¼ˆ128ä¸ªå‚æ•°ç»„åˆï¼‰ï¼š

```bash
python test_parameter_optimization.py
```

**é¢„è®¡è€—æ—¶**: 5-10åˆ†é’Ÿ  
**ç”¨é€”**: éªŒè¯ç³»ç»ŸåŠŸèƒ½ï¼Œå¿«é€Ÿè·å¾—åˆæ­¥ç»“æœ

## ğŸ“‹ ç³»ç»Ÿæ¶æ„

```
â”œâ”€â”€ run_parameter_optimization.py      # ä¸»æ§è„šæœ¬
â”œâ”€â”€ test_parameter_optimization.py     # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ analysis/
â”‚   â””â”€â”€ comprehensive_parameter_grid_search.py  # ç½‘æ ¼æœç´¢æ ¸å¿ƒ
â”œâ”€â”€ visualization/
â”‚   â””â”€â”€ parameter_analysis_visualizer.py        # å¯è§†åŒ–æ¨¡å—
â””â”€â”€ results/
    â””â”€â”€ parameter_optimization_YYYYMMDD_HHMMSS/  # ç»“æœç›®å½•
```

## ğŸ›ï¸ å‚æ•°é…ç½®

### ç½‘ç»œæ„å»ºå‚æ•°

| å‚æ•° | å«ä¹‰ | é»˜è®¤æœç´¢èŒƒå›´ | å»ºè®®å€¼ |
|------|------|-------------|--------|
| `occ_thr` | é“è·¯æœ€å°å‡ºç°æ¬¡æ•° | [2, 3, 4, 5] | 3-4 |
| `edge_thr` | è¾¹æœ€å°å…±ç°æ¬¡æ•° | [1, 2, 3] | 2-3 |
| `weight_thr` | è¾¹æƒé‡é˜ˆå€¼ | [0.2, 0.3, 0.4, 0.5] | 0.3-0.4 |

### è¯„ä¼°å‚æ•°

| å‚æ•° | å«ä¹‰ | é»˜è®¤æœç´¢èŒƒå›´ | å»ºè®®å€¼ |
|------|------|-------------|--------|
| `evidence_count` | è¯æ®é“è·¯æ•°é‡ | [1, 2, 3, 4] | 2-3 |
| `pred_threshold` | é¢„æµ‹é˜ˆå€¼ | [0.1, 0.2, 0.3, 0.4, 0.5] | 0.2-0.3 |

### è´Ÿæ ·æœ¬ç­–ç•¥å‚æ•°

| å‚æ•° | å«ä¹‰ | é»˜è®¤æœç´¢èŒƒå›´ | å»ºè®®å€¼ |
|------|------|-------------|--------|
| `neg_pos_ratio` | è´Ÿæ­£æ ·æœ¬æ¯”ä¾‹ | [1.0, 1.5, 2.0] | 1.0-1.5 |
| `marginal_prob_threshold` | è¾¹é™…æ¦‚ç‡é˜ˆå€¼ | [0.03, 0.05, 0.08] | 0.05 |

## ğŸ¯ çº¦æŸæ¡ä»¶è®¾ç½®

åœ¨ `run_parameter_optimization.py` ä¸­ä¿®æ”¹ `constraints` å­—å…¸ï¼š

```python
constraints = {
    'min_precision': 0.8,    # ç²¾ç¡®åº¦ â‰¥ 0.8
    'min_recall': 0.8,       # å¬å›ç‡ â‰¥ 0.8
    'min_f1_score': 0.7,     # F1åˆ†æ•° â‰¥ 0.7
    'min_samples': 30,       # æµ‹è¯•æ ·æœ¬æ•° â‰¥ 30
    'min_accuracy': 0.7      # å‡†ç¡®ç‡ â‰¥ 0.7 (å¯é€‰)
}
```

### å¸¸è§çº¦æŸæ¡ä»¶ç»„åˆ

**é«˜ç²¾åº¦åœºæ™¯**ï¼š
```python
constraints = {'min_precision': 0.9, 'min_recall': 0.6}
```

**é«˜å¬å›åœºæ™¯**ï¼š
```python
constraints = {'min_precision': 0.6, 'min_recall': 0.9}
```

**å¹³è¡¡åœºæ™¯**ï¼š
```python
constraints = {'min_precision': 0.7, 'min_recall': 0.7, 'min_f1_score': 0.7}
```

## ğŸ“Š è¾“å‡ºæ–‡ä»¶è¯´æ˜

### ç»“æœç›®å½•ç»“æ„

```
results/parameter_optimization_YYYYMMDD_HHMMSS/
â”œâ”€â”€ complete_results.csv              # å®Œæ•´ç»“æœ
â”œâ”€â”€ parameter_recommendations.json    # æ¨èé…ç½®
â”œâ”€â”€ optimization_report.md           # åˆ†ææŠ¥å‘Š
â”œâ”€â”€ experiment_config.json           # å®éªŒé…ç½®
â”œâ”€â”€ performance_summary.json         # æ€§èƒ½æ‘˜è¦
â””â”€â”€ visualizations/                  # å¯è§†åŒ–å›¾è¡¨
    â”œâ”€â”€ precision_recall_f1_3d.png       # 3Dæ€§èƒ½åˆ†å¸ƒ
    â”œâ”€â”€ parameter_heatmaps.png            # å‚æ•°çƒ­å›¾
    â”œâ”€â”€ parameter_sensitivity.png         # æ•æ„Ÿæ€§åˆ†æ
    â”œâ”€â”€ pareto_frontier.png              # Paretoå‰æ²¿
    â””â”€â”€ constraint_filtering.png         # çº¦æŸç­›é€‰
```

### CSVç»“æœæ–‡ä»¶æ ¼å¼

`complete_results.csv` åŒ…å«ä»¥ä¸‹åˆ—ï¼š

| åˆ—å | å«ä¹‰ |
|------|------|
| `occ_thr`, `edge_thr`, `weight_thr` | ç½‘ç»œæ„å»ºå‚æ•° |
| `evidence_count`, `pred_threshold` | è¯„ä¼°å‚æ•° |
| `neg_pos_ratio`, `marginal_prob_threshold` | è´Ÿæ ·æœ¬ç­–ç•¥ |
| `precision`, `recall`, `f1_score`, `accuracy` | æ€§èƒ½æŒ‡æ ‡ |
| `tp`, `fp`, `tn`, `fn` | æ··æ·†çŸ©é˜µå…ƒç´  |
| `total_samples`, `network_nodes` | ç»Ÿè®¡ä¿¡æ¯ |
| `runtime_seconds` | è¿è¡Œæ—¶é—´ |

## ğŸ¨ å¯è§†åŒ–å›¾è¡¨

### 1. 3Dæ€§èƒ½åˆ†å¸ƒå›¾ (`precision_recall_f1_3d.png`)
- **ç”¨é€”**: å±•ç¤ºæ‰€æœ‰å‚æ•°ç»„åˆåœ¨ Precision-Recall-F1 ä¸‰ç»´ç©ºé—´ä¸­çš„åˆ†å¸ƒ
- **è§£è¯»**: é¢œè‰²è¶Šæ·±è¡¨ç¤ºF1åˆ†æ•°è¶Šé«˜

### 2. å‚æ•°çƒ­å›¾ (`parameter_heatmaps.png`)
- **ç”¨é€”**: æ˜¾ç¤ºä¸åŒå‚æ•°ç»„åˆå¯¹F1åˆ†æ•°çš„å½±å“
- **è§£è¯»**: çº¢è‰²åŒºåŸŸè¡¨ç¤ºé«˜æ€§èƒ½å‚æ•°ç»„åˆ

### 3. å‚æ•°æ•æ„Ÿæ€§åˆ†æ (`parameter_sensitivity.png`)
- **ç”¨é€”**: åˆ†æå•ä¸ªå‚æ•°å˜åŒ–å¯¹æ€§èƒ½çš„å½±å“
- **è§£è¯»**: æ–œç‡è¶Šå¤§è¡¨ç¤ºå‚æ•°è¶Šæ•æ„Ÿ

### 4. Paretoå‰æ²¿åˆ†æ (`pareto_frontier.png`)
- **ç”¨é€”**: å±•ç¤º Precision-Recall æƒè¡¡å…³ç³»
- **è§£è¯»**: å³ä¸Šè§’çš„ç‚¹ä»£è¡¨æœ€ä¼˜çš„æƒè¡¡é…ç½®

### 5. çº¦æŸç­›é€‰ç»“æœ (`constraint_filtering.png`)
- **ç”¨é€”**: æ˜¾ç¤ºæ»¡è¶³çº¦æŸæ¡ä»¶çš„å‚æ•°åˆ†å¸ƒ
- **è§£è¯»**: è“è‰²ç‚¹è¡¨ç¤ºæ»¡è¶³çº¦æŸçš„é…ç½®

## ğŸ’¡ æ¨èé…ç½®è§£é‡Š

ç³»ç»Ÿä¼šç”Ÿæˆ5ç§æ¨èé…ç½®ï¼š

### 1. æœ€ä½³F1åˆ†æ•°é…ç½®
- **ç‰¹ç‚¹**: F1åˆ†æ•°æœ€é«˜
- **é€‚ç”¨**: ç»¼åˆæ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯

### 2. æœ€é«˜ç²¾ç¡®åº¦é…ç½®
- **ç‰¹ç‚¹**: ç²¾ç¡®åº¦æœ€é«˜ï¼Œå‡å°‘è¯¯æŠ¥
- **é€‚ç”¨**: å¯¹è¯¯æŠ¥æ•æ„Ÿçš„åœºæ™¯

### 3. æœ€é«˜å¬å›ç‡é…ç½®
- **ç‰¹ç‚¹**: å¬å›ç‡æœ€é«˜ï¼Œå‡å°‘æ¼æŠ¥
- **é€‚ç”¨**: ä¸èƒ½é—æ¼çœŸå®äº‹ä»¶çš„åœºæ™¯

### 4. æœ€å¹³è¡¡é…ç½®
- **ç‰¹ç‚¹**: Precision å’Œ Recall æœ€æ¥è¿‘
- **é€‚ç”¨**: éœ€è¦å¹³è¡¡æ€§èƒ½çš„åœºæ™¯

### 5. æœ€é²æ£’é…ç½®
- **ç‰¹ç‚¹**: å‚æ•°å˜åŒ–æ—¶æ€§èƒ½æœ€ç¨³å®š
- **é€‚ç”¨**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

## ğŸ”§ é«˜çº§ç”¨æ³•

### 1. è‡ªå®šä¹‰å‚æ•°ç½‘æ ¼

ä¿®æ”¹ `run_parameter_optimization.py` ä¸­çš„å‚æ•°ç½‘æ ¼ï¼š

```python
custom_param_grid = {
    'occ_thr': [3, 4, 5],           # è‡ªå®šä¹‰èŒƒå›´
    'edge_thr': [2],                # å›ºå®šå€¼
    'weight_thr': [0.3, 0.35, 0.4], # æ›´ç»†ç²’åº¦
    # ... å…¶ä»–å‚æ•°
}

optimizer = ParameterOptimizer(
    constraints=constraints, 
    param_grid=custom_param_grid
)
```

### 2. å•ç‹¬è¿è¡Œç½‘æ ¼æœç´¢

```python
from analysis.comprehensive_parameter_grid_search import ParameterGridSearcher

searcher = ParameterGridSearcher()
results, result_dir = searcher.run_grid_search()
```

### 3. å•ç‹¬è¿è¡Œå¯è§†åŒ–

```python
import pandas as pd
from visualization.parameter_analysis_visualizer import ParameterVisualizer

# åŠ è½½ç°æœ‰ç»“æœ
df = pd.read_csv("results/parameter_optimization_XXX/complete_results.csv")

# åˆ›å»ºå¯è§†åŒ–
visualizer = ParameterVisualizer(df, "my_visualizations")
visualizer.generate_all_visualizations()
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### ç³»ç»Ÿè¦æ±‚
- **Python**: 3.7+
- **å†…å­˜**: å»ºè®® 8GB+
- **å­˜å‚¨**: éœ€è¦ 1-2GB ç©ºé—´ä¿å­˜ç»“æœ

### ä¾èµ–åº“
```bash
pip install pandas numpy matplotlib seaborn scikit-learn
pip install pgmpy networkx  # é¡¹ç›®ç‰¹å®šä¾èµ–
```

### è¿è¡Œæ—¶é—´ä¼°ç®—
- **å®Œæ•´ä¼˜åŒ–** (4,320ç»„åˆ): 2-4å°æ—¶
- **æµ‹è¯•ç‰ˆæœ¬** (128ç»„åˆ): 5-10åˆ†é’Ÿ
- **å•ä¸ªç»„åˆ**: çº¦30-60ç§’

### å¸¸è§é—®é¢˜

**Q: æœç´¢è¿‡ç¨‹ä¸­å‡ºç°å¤§é‡å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: è¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚æŸäº›å‚æ•°ç»„åˆå¯èƒ½å¯¼è‡´ç½‘ç»œæ„å»ºå¤±è´¥æˆ–è¯„ä¼°æ ·æœ¬ä¸è¶³ã€‚æˆåŠŸç‡åœ¨30-70%æ˜¯æ­£å¸¸çš„ã€‚

**Q: æ²¡æœ‰å‚æ•°ç»„åˆæ»¡è¶³çº¦æŸæ¡ä»¶æ€ä¹ˆåŠï¼Ÿ**
A: å°è¯•æ”¾å®½çº¦æŸæ¡ä»¶ï¼Œæˆ–è€…å¢åŠ å‚æ•°æœç´¢èŒƒå›´ã€‚

**Q: å¦‚ä½•é€‰æ‹©æœ€é€‚åˆçš„é…ç½®ï¼Ÿ**
A: æ ¹æ®åº”ç”¨åœºæ™¯é€‰æ‹©ï¼š
- é¢„è­¦ç³»ç»Ÿï¼šé€‰æ‹©é«˜å¬å›ç‡é…ç½®
- å†³ç­–æ”¯æŒï¼šé€‰æ‹©é«˜ç²¾ç¡®åº¦é…ç½®
- ç ”ç©¶åˆ†æï¼šé€‰æ‹©æœ€ä½³F1é…ç½®

## ğŸ“ æ”¯æŒ

é‡åˆ°é—®é¢˜æ—¶ï¼š
1. æŸ¥çœ‹ç”Ÿæˆçš„ `optimization_report.md`
2. æ£€æŸ¥ `experiment_config.json` ç¡®è®¤é…ç½®
3. è¿è¡Œ `test_parameter_optimization.py` éªŒè¯ç³»ç»ŸåŠŸèƒ½

## ğŸ”„ æ›´æ–°æ—¥å¿—

**v1.0** (2025-01-21)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒå…¨å‚æ•°ç½‘æ ¼æœç´¢
- å¤šç§å¯è§†åŒ–åˆ†æ
- çº¦æŸæ¡ä»¶ç­›é€‰
- 5ç§æ¨èç­–ç•¥